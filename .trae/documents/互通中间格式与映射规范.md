# SISTEMA / PAScal / Siemens SET 互通中间格式与映射规范

## 1. 目标
- 通过统一的 JSON/CSV 中间格式，实现与主流机械功能安全评估工具的互通：库条目（组件参数）与项目结构（安全功能/子系统）。

## 2. 中间格式（JSON）
- files:
  - library.json：组件安全参数库（见 component_safety_library.schema.json）。
  - project.json：安全功能结构与计算选项。
- project.json 结构：
  - meta：name、standard(ISO13849/IEC62061/both)、createdAt、author
  - functions[]：{ id, name, target(PLr/SIL), model(I/L/O), mappings, options }
  - model(I/L/O)：每个通道设备引用库项 id 与覆盖参数。
  - options：计算选项（AnnexKMethod=simplified/regular、beta、proofTestCoverage等）。

## 3. CSV 视图
- library.csv：id,manufacturer,model,category,B10d,MTTFd,DCcapability,PFHd,SFF,HFT,beta
- project_devices.csv：functionId,channel,deviceId,overrideParams(json)

## 4. 映射策略
- SISTEMA：
  - 库：manufacturer/model → SLIB 条目；参数映射 B10d/MTTFd/DC；
  - 项目：I/L/O 通道映射为 block；Category 与 DCavg 依据内置方法提示；
  - 报告：PL 与风险参数映射到摘要；证据作为附件。
- PAScal：
  - 子系统与混合结构按设备与参数聚合；保留类别与 DCcapability；
  - 支持混合（ISO/IEC）项目的字段并存。
- Siemens SET：
  - 以 IEC 62061 为主，PFHd、SFF、HFT、β 因子直映；
  - 结构映射到子系统架构（1oo1/1oo2/2oo3）。

## 5. 边界与注意事项
- 不同工具的计算假设存在差异：需在导入/导出时显式记录假设与边界条件。
- 证据无法自动转换：以链接与附件占位方式保留，需人工复核。

## 6. 验证
- 提供示例库与项目，验证三方工具的数据往返一致性（参数值、结构、结果区间）。

