# 安全功能建模规范（ISO 13849-1 / IEC 62061）

## 1. 范围
- 规范平台内安全功能的结构化建模：输入（I）/逻辑（L）/输出（O）通道、冗余与监测特征、类别推导、DCavg 计算与故障掩蔽提示，兼顾 IEC 62061 的子系统结构。

## 2. 模型元素
- SafetyFunction
  - id, name, standard (ISO13849/IEC62061/both)
  - channels: I[], L[], O[]
  - architectureHints: redundancy(m/n), crossMonitoring, testEquipment, demandRate
  - target: PLr/SIL
  - assumptions & boundaries
- Channel
  - id, role(I/L/O), devices[]
  - monitoring: cyclic/online/cross
  - test: frequency, coverage
- Device
  - id, manufacturer, model
  - parameters: B10d/MTTFd/DCcapability/PFHd
  - certificates & evidenceRefs

## 3. 类别推导（ISO 13849-1）
- 依据设备冗余、监测/测试策略：
  - B/1：单通道，无 DCavg/CCF。
  - 2：单通道+测试设备，DCavg 取决于测试频率与需求率。
  - 3/4：双通道冗余与交叉监测，要求 CCF≥65。
- 系统自动建议类别，并提示不满足条件的改进方向。

## 4. DCavg 计算与故障掩蔽（Annex K）
- 串联设备的 DCavg 上限受使用频率与设备数量影响：提供简化法与常规法两种路径；
- 当出现故障掩蔽风险时，给出“上限值”“概率等级”与整改建议。

## 5. IEC 62061 子系统建模
- 支持 1oo1/1oo2/2oo3 等架构选择，记录 β 因子、SFF/HFT；
- 子系统与组件可映射到 ISO 模型元素，便于双标准并行评估。

## 6. 报告输出需求
- 展示结构图（I/L/O）与类别/架构选择；
- 列出参数来源与证据；
- 明确计算路径与关键假设、边界条件与不确定性。

## 7. 交互与校验
- 表单驱动的参数录入与实时计算；
- 冲突检测（例如选择 Category 3 但无监测/低 CCF）；
- 可视化提示（颜色/图标）与可操作的整改建议。

